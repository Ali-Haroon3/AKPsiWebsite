<!-- <!DOCTYPE HTML>
<html>

<head>
    <title>Alpha Kappa Psi - Points</title>
    <link rel="icon" type="image/png" href="../favicon.png" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/assets/css/main.css" />
    <link href="/assets/vendor/ionicons/css/ionicons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/css/animate.min.css" rel="stylesheet">
    <link href="/assets/css/fontawesome-all.min.css" rel="stylesheet">
    <link href="/assets/css/fonts.css" rel="stylesheet">
    <link href="/assets/img/favicon.png" rel="icon">
    <script src="jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .points-outline {
            border: 2px solid #000;
            padding: 20px;
            margin-right: 15px;
            background-color: #f9f9f9;
        }

        .points-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .points-row .points-outline:last-child {
            margin-right: 0;
        }

        .table-bordered th {
            background-color: #063060;
            color: white;
            font-size: 16px;
        }

        .sobro-table {
            height: 66%;
        }

        .stats {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .points-center {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .profile-info {
            margin-top: 50px;
            text-align: center;
        }

        .profile-info h1 {
            font-size: 32px;
            font-weight: bold;
            color: #063060;
        }

        .profile-info p {
            font-size: 20px;
            color: #2d2d2d;
        }

        .unexcused-absences {
            text-align: center;
            margin-top: 20px;
            font-size: 24px;
            font-weight: bold;
        }

        .points-footer {
            margin-top: 30px;
            text-align: center;
            font-size: 14px;
        }

        .points-footer-content p {
            margin: 5px 0;
            color: #063060;
        }
    </style>
</head>

<body class="is-preload">
    <div class="points-body">
        <section class="points-header">
            <div class="member-logo-points">
                <img class="logo-image" src="../images/logo.png" alt="Chapter Logo" />
            </div>
            <a class="nav-link1" href="points.html">Points</a>
            <a class="nav-link2" href="calendar.html">Calendar</a>
            <a class="nav-link3" href="/portal/">Logout</a>
        </section>

        <section class="profile-info">
            <h1 id="profile-fullname">Preferred Name</h1>
            <p id="profile-year">Year</p>
        </section>

        <section class="points-content">
            <div class="points-row">
                <div class="points-outline">
                    <h2>Profile Settings</h2>
                    <form class="points-form">
                        <label for="ffirstname">First Name</label><br>
                        <input type="text" id="ffirstname" required><br><br>
                        <label for="flastname">Last Name</label><br>
                        <input type="text" id="flastname" required><br><br>
                        <label for="fpassword">Password</label><br>
                        <input type="password" id="fpassword" required><br><br>
                        <input type="submit" value="Save Changes">
                    </form>
                </div>

                <div class="points-outline">
                    <h2>Brother Interviews</h2>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Date</th>
                                <th>Points</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>John Doe</td><td>2024-08-01</td><td>5</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="points-outline sobro-table">
                    <h2>So-Bros</h2>
                    <table class="table table-bordered">
                        <thead>
                            <tr><th>Name</th><th>Task</th><th>Status</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>Michael Brown</td><td>Drive to event</td><td>Completed</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="unexcused-absences">
                <h2>Unexcused Absences: <span id="unexcused-absences-count">0</span></h2>
            </div>

            <div class="points-center">
                <div class="points-outline stats">
                    <canvas id="pointsChart" width="400" height="400"></canvas>
                </div>
            </div>
        </section>

        <section class="points-footer">
            <div class="points-footer-content">
                <p>Designed by Ali Haroon &copy; 2024 Alpha Kappa Psi</p>
            </div>
        </section>
    </div>

    <script>
document.addEventListener('DOMContentLoaded', function () {
    fetch('https://akpsi-portal-8b825ba31535.herokuapp.com/user/auth/user', {
        method: 'GET',
        credentials: 'include'
    })
    .then(response => response.json())
    .then(user => {
        document.getElementById('profile-fullname').innerText = user.firstname + ' ' + user.lastname;
        document.getElementById('profile-year').innerText = user.year;
        document.getElementById('unexcused-absences-count').innerText = user.unexcusedAbsences;

        const chartData = Object.values(user.points);
        const ctx = document.getElementById('pointsChart').getContext('2d');
        new Chart(ctx, {
            type: 'pie',
            data: {
                labels: Object.keys(user.points),
                datasets: [{ data: chartData }]
            }
        });
    })
    .catch(error => console.error('Error fetching user data:', error));
});


    </script>
</body>

</html> -->
<!DOCTYPE HTML>
<html>

<head>
    <title>Alpha Kappa Psi - Points</title>
    <link rel="icon" type="image/png" href="/assets/img/favicon.png" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

    <!-- Updated CSS and JS paths -->
    <link rel="stylesheet" href="/assets/css/main.css" />
    <link rel="stylesheet" href="/assets/vendor/ionicons/css/ionicons.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" 
          integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous" />
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/assets/css/animate.min.css" />
    <link rel="stylesheet" href="/assets/css/fontawesome-all.min.css" />
    <link rel="stylesheet" href="/assets/css/fonts.css" />

    <!-- Corrected jQuery path -->
    <script src="/assets/vendor/jquery/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* Unchanged CSS styles */
        .points-outline { border: 2px solid #000; padding: 20px; margin-right: 15px; background-color: #f9f9f9; }
        .points-row { display: flex; justify-content: space-between; margin-bottom: 20px; }
        .points-row .points-outline:last-child { margin-right: 0; }
        .table-bordered th { background-color: #063060; color: white; font-size: 16px; }
        .sobro-table { height: 66%; }
        .stats { display: flex; justify-content: center; margin-top: 20px; }
        .points-center { display: flex; flex-direction: column; align-items: center; }
        .profile-info { margin-top: 50px; text-align: center; }
        .profile-info h1 { font-size: 32px; font-weight: bold; color: #063060; }
        .profile-info p { font-size: 20px; color: #2d2d2d; }
        .unexcused-absences { text-align: center; margin-top: 20px; font-size: 24px; font-weight: bold; }
        .points-footer { margin-top: 30px; text-align: center; font-size: 14px; }
        .points-footer-content p { margin: 5px 0; color: #063060; }
    </style>
</head>

<body class="is-preload">
    <div class="points-body">
        <section class="points-header">
            <div class="member-logo-points">
                <img class="logo-image" src="/assets/images/logo.png" alt="Chapter Logo" />
            </div>
            <a class="nav-link1" href="points.html">Points</a>
            <a class="nav-link2" href="calendar.html">Calendar</a>
            <a class="nav-link3" href="/portal/">Logout</a>
        </section>

        <section class="profile-info">
            <h1 id="profile-fullname">Preferred Name</h1>
            <p id="profile-year">Year</p>
        </section>

        <section class="points-content">
            <div class="points-row">
                <div class="points-outline">
                    <h2>Profile Settings</h2>
                    <form class="points-form">
                        <label for="ffirstname">First Name</label><br />
                        <input type="text" id="ffirstname" required /><br /><br />
                        <label for="flastname">Last Name</label><br />
                        <input type="text" id="flastname" required /><br /><br />
                        <label for="fpassword">Password</label><br />
                        <input type="password" id="fpassword" required /><br /><br />
                        <input type="submit" value="Save Changes" />
                    </form>
                </div>

                <div class="points-outline">
                    <h2>Brother Interviews</h2>
                    <table class="table table-bordered">
                        <thead>
                            <tr><th>Name</th><th>Date</th><th>Points</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>John Doe</td><td>2024-08-01</td><td>5</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="points-outline sobro-table">
                    <h2>So-Bros</h2>
                    <table class="table table-bordered">
                        <thead>
                            <tr><th>Name</th><th>Task</th><th>Status</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>Michael Brown</td><td>Drive to event</td><td>Completed</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="unexcused-absences">
                <h2>Unexcused Absences: <span id="unexcused-absences-count">0</span></h2>
            </div>

            <div class="points-center">
                <div class="points-outline stats">
                    <canvas id="pointsChart" width="400" height="400"></canvas>
                </div>
            </div>
        </section>

        <section class="points-footer">
            <div class="points-footer-content">
                <p>Designed by Ali Haroon &copy; 2024 Alpha Kappa Psi</p>
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/user/auth/user', {
                method: 'GET',
                credentials: 'include'
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(user => {
                document.getElementById('profile-fullname').innerText = `${user.firstname} ${user.lastname}`;
                document.getElementById('profile-year').innerText = user.year || 'Year not specified';
                document.getElementById('unexcused-absences-count').innerText = user.unexcusedAbsences || 0;
    
                const points = {
                    'Alumni Tailgate': user.alumni_tailgate,
                    'Assisting with Interviews': user.assisting_with_interviews,
                    'Big Brother Mentor': user.big_brother_mentor,
                    'Brother Interviews': user.brother_interviews,
                    'BUSIK Letters': user.busik_letters,
                    // ... add other point categories ...
                };
    
                const chartData = Object.values(points);
                const ctx = document.getElementById('pointsChart').getContext('2d');
                new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: Object.keys(points),
                        datasets: [{
                            data: chartData,
                            backgroundColor: chartData.map(() => `#${Math.floor(Math.random() * 16777215).toString(16)}`)
                        }]
                    }
                });
            })
            .catch(error => console.error('Error fetching user data:', error));
        });
    </script>
</body>

</html>
